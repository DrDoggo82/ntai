(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{31:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(1),a=c.n(n),r=c(16),i=c.n(r),j=(c(31),c(6)),o=c(5),l=c(4),u=c(11),d=c(3),b=c(9),h=function(e){var t=e.title,c=e.toggle,a=e.options,r=e.onSelect,i=Object(n.useState)(!1),j=Object(u.a)(i,2),o=j[0],l=j[1];return Object(s.jsxs)("div",{className:"select",onClick:function(){return l(!o)},children:[Object(s.jsx)("button",{className:"toggle",children:c}),o&&Object(s.jsx)("div",{className:"options-background",children:Object(s.jsxs)("div",{className:"options",children:[t&&Object(s.jsx)("div",{className:"title",children:t}),a.map((function(e,t){return Object(s.jsx)("div",{onClick:function(){r(e.value)},className:"option",children:e.display},t)}))]})})]})},O=function(e){return"today"===e?"Popular Today":"week"===e?"Popular this Week":"recent"===e?"Recent":"Popular all Time"},m=function(e){var t=e.current,c=e.keyword,n=e.page,a=Object(o.f)(),r=Object(o.g)();return Object(s.jsxs)("section",{className:"sorter",children:[Object(s.jsx)("div",{className:"current",children:O(t)}),Object(s.jsx)("div",{className:"controls",children:Object(s.jsx)(h,{title:"Sort by",toggle:Object(s.jsx)(d.h,{}),options:[{value:"recent",display:O("recent")},{value:"week",display:O("week")},{value:"today",display:O("today")},{value:"all",display:O("all")}],onSelect:function(e){a.push(function(e){var t=r.pathname;return n||c?n&&!c?"".concat(t,"?p=").concat(n,"&s=").concat(e):!n&&c?"".concat(t,"?k=").concat(c,"&s=").concat(e):"".concat(t,"?k=").concat(c,"&p=").concat(n,"&s=").concat(e):"".concat(t,"?s=").concat(e)}(e))}})})]})},p=function(e){var t=e.page,c=e.sort,n=e.keyword,a=e.total,r=Object(o.f)(),i=Object(o.g)(),j=function(e){return r.push(function(e){var t=i.pathname;return c||n?c&&!n?"".concat(t,"?s=").concat(c,"&p=").concat(e):!c&&n?"".concat(t,"?k=").concat(n,"&p=").concat(e):"".concat(t,"?k=").concat(n,"&s=").concat(c,"&p=").concat(e):"".concat(t,"?p=").concat(e)}(e))},l=function(e){var c=parseInt(t||"1");return"prev"===e&&1!==c?j(c-1):"next"===e?j(c+1):void 0};return Object(s.jsx)("div",{className:"paginator",children:Object(s.jsxs)("nav",{children:[Object(s.jsx)("button",{className:"prev",onClick:function(){return l("prev")},children:Object(s.jsx)(d.c,{})}),Object(s.jsxs)("div",{className:"current-pg",children:[t||1," of"]}),Object(s.jsx)("button",{className:"last",children:a}),Object(s.jsx)("button",{className:"next",onClick:function(){return l("next")},children:Object(s.jsx)(d.d,{})})]})})},x=c(12),g=c.n(x),v=c(14),f=function(){var e=Object(v.a)(g.a.mark((function e(t,c,s,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/doujins/search?keyword=".concat(c||"*","&page=").concat(s||1,"&sort=").concat(n));case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,s,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(g.a.mark((function e(t,c){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/doujin/".concat(c));case 3:return s=e.sent,e.abrupt("return",s.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(g.a.mark((function e(t,c,s){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/doujins/tag/".concat(c,"?page=").concat(s||1));case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,s){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(g.a.mark((function e(t,c){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/doujins/related/".concat(c));case 3:return s=e.sent,e.abrupt("return",s.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(g.a.mark((function e(t,c,s){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c,ext:s})},e.next=4,fetch("/api/image",n);case 4:return a=e.sent,e.abrupt("return",a.json());case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c,s){return e.apply(this,arguments)}}(),F=c(24),I=c.p+"static/media/phl.639d2f52.png",S=function(e){var t=e.full,c=e.image,n=void 0===c||c;return Object(s.jsxs)("div",{className:"loading "+(t&&"fullscreen"),children:[n&&Object(s.jsx)("img",{id:"ph",src:I,alt:"loading-placeholder"}),Object(s.jsx)("p",{className:"text",children:"LOADING"})]})},C=c.p+"static/media/phe.01cbcdb2.png",P=function(e){var t=e.full,c=e.message,n=e.image,a=void 0===n||n;return Object(s.jsxs)("div",{className:"error "+(t&&"fullscreen"),children:[a&&Object(s.jsx)("img",{id:"ph",src:C,alt:"error-placeholder"}),Object(s.jsx)("p",{className:"text",children:"ERROR"}),Object(s.jsx)("p",{className:"message",children:c})]})},R=function(e){var t=e.url,c=e.height,n=e.width,a=e.extension,r=e.className,i=e.phImg,j=void 0===i||i,o=Object(F.a)({triggerOnce:!0}),l=o.ref,u=o.inView,d=Object(b.a)(["results",t,a],w,{enabled:u}),h=d.data,O=d.status;return Object(s.jsxs)("div",{ref:l,id:"image",className:r,children:["loading"===O&&Object(s.jsx)(S,{image:j}),"error"===O&&Object(s.jsx)(P,{image:j,message:"Failed to get image, check your internet connection"}),"success"===O&&h&&(h.src?Object(s.jsx)("img",{height:c,width:n,src:h.src,alt:h.src}):Object(s.jsx)(P,{image:j,message:"Image Corrupted"}))]})},D=c(25),A=function(e){var t,c={list:[]},s=Object(D.a)(e);try{for(s.s();!(t=s.n()).done;){var n=t.value;c.hasOwnProperty(n.type)||(c[n.type]=[],c.list.push(n.type)),c[n.type].push(n)}}catch(a){s.e(a)}finally{s.f()}return c.list.sort((function(e,t){return e.localeCompare(t)})),c},L=function(e){var t=e.toString().length;return t>3&&t<7?(e/1e3).toFixed(2)+"k":t>6&&t<10?(e/1e6).toFixed(2)+"m":e},T=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},J=function(e){var t=A(e);return t.list.map((function(e,c){return Object(s.jsxs)("div",{className:"group",children:[Object(s.jsxs)("div",{className:"group-title",children:[Object(s.jsx)(d.k,{})," ",T(e)]}),t[e].map((function(e,t){return Object(s.jsx)("span",{className:"tag",children:e.name},t)}))]},c)}))},U=function(e){var t=e.item;return Object(s.jsxs)(j.b,{to:"/doujin/".concat(t.doujinId),className:"card",children:[Object(s.jsx)(R,Object(l.a)(Object(l.a)({className:"thumbnail"},t.thumbnail),{},{phImg:!1})),Object(s.jsxs)("section",{className:"summary",children:[Object(s.jsxs)("div",{className:"id",children:[Object(s.jsx)(d.e,{}),t.doujinId]}),Object(s.jsx)("div",{className:"title",children:t.titles.pretty}),Object(s.jsxs)("div",{className:"chapters",children:[Object(s.jsx)(d.i,{}),t.length]}),Object(s.jsxs)("div",{className:"favorites",children:[Object(s.jsx)(d.f,{}),t.favorites]}),Object(s.jsx)("div",{className:"tags",children:J(t.tags)})]})]})},q=function(e){var t=e.items;return Object(s.jsx)("div",{className:"view",children:t.map((function(e,t){return Object(s.jsx)(U,Object(l.a)({},{key:t,item:e}))}))})},E=function(){for(var e=Object(o.g)(),t=[],c=new URLSearchParams(e.search),s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var j=i[r];t.push(c.get(j))}return t},W=function(){var e=Object(o.f)(),t=E("p","s","k"),c=Object(u.a)(t,3),a=c[0],r=c[1],i=c[2],j=Object(b.a)(["home",i,a,r],f),h=j.data,O=j.status,x=Object(n.useState)(""),g=Object(u.a)(x,2),v=g[0],N=g[1],y=function(){if(isNaN(parseInt(v)))return e.push("/search?k=".concat(v));e.push("/doujin/".concat(parseInt(v)))};return Object(s.jsxs)("main",{className:"home",children:[Object(s.jsxs)("section",{className:"landing",children:[Object(s.jsxs)("form",{id:"search",onSubmit:function(e){e.preventDefault(),y()},children:[Object(s.jsx)("input",{type:"text",placeholder:"eg. 177013",onChange:function(e){return N(e.target.value)}}),v.length>0&&Object(s.jsx)("button",{type:"button",className:"reset",onClick:function(){N(""),document.querySelector("#search input").value=""},children:Object(s.jsx)(d.m,{})})]}),Object(s.jsx)("button",{className:"go",onClick:y,children:Object(s.jsx)(d.l,{})}),Object(s.jsx)("div",{className:"indicator",children:Object(s.jsx)("button",{children:Object(s.jsx)(d.b,{})})})]}),"loading"===O&&Object(s.jsx)(S,{full:!0}),"error"===O&&Object(s.jsx)(P,{full:!0,message:"Failed to get doujins, check your internet connection"}),"success"===O&&h&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m,Object(l.a)({},{current:r,page:a,keyword:i})),Object(s.jsx)("section",{className:"view-holder",children:h.doujins?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q,Object(l.a)({},{items:h.doujins})),Object(s.jsx)(p,Object(l.a)({},{page:a,sort:r,keyword:i,total:h.numPages}))]}):Object(s.jsx)(P,{message:"Not Found"})})]})]})},B=function(){var e=Object(o.g)(),t=new URLSearchParams(e.search).get("k");return Object(s.jsx)("header",{className:"appbar",children:Object(s.jsxs)("nav",{children:[Object(s.jsx)("button",{className:"menu-toggle",children:Object(s.jsx)(d.g,{})}),"/search"===e.pathname&&Object(s.jsxs)("div",{className:"searched",children:[Object(s.jsx)("span",{children:t||"all"}),Object(s.jsx)("span",{children:Object(s.jsx)(j.b,{to:"/search",children:"search"})})]}),Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)(j.b,{to:"/",children:"ntai"})})]})})},G=function(){var e=Object(o.f)(),t=Object(n.useState)(""),c=Object(u.a)(t,2),a=c[0],r=c[1],i=function(){if(isNaN(parseInt(a)))return e.push("/search?k=".concat(a));e.push("/doujin/".concat(parseInt(a)))};return Object(s.jsx)("section",{className:"searchbar",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i()},children:[Object(s.jsx)("input",{type:"text",placeholder:"Search eg. big boobs",onChange:function(e){return r(e.target.value)}}),a.length>0&&Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsx)("button",{className:"go",type:"button",onClick:i,children:Object(s.jsx)(d.l,{})}),Object(s.jsx)("button",{className:"reset",type:"button",onClick:function(){r(""),document.querySelector(".searchbar input").value=""},children:Object(s.jsx)(d.m,{})})]})]})})},M=function(){var e=E("p","s","k"),t=Object(u.a)(e,3),c=t[0],n=t[1],a=t[2],r=Object(b.a)(["searched",a,c,n],f),i=r.data,j=r.status;return Object(s.jsxs)("main",{className:"search",children:["loading"===j&&Object(s.jsx)(S,{full:!0}),"error"===j&&Object(s.jsx)(P,{full:!0,message:"Failed to get doujins, check your internet connection"}),"success"===j&&i&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m,Object(l.a)({},{current:n,page:c,keyword:a})),Object(s.jsx)(G,{}),Object(s.jsx)("section",{className:"view-holder",children:i.doujins?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q,Object(l.a)({},{items:i.doujins})),Object(s.jsx)(p,Object(l.a)({},{page:c,sort:n,keyword:a,total:i.numPages}))]}):Object(s.jsx)(P,{message:"Not Found"})})]})]})},V=function(e){var t=e.id,c=Object(b.a)(["related",t],k),n=c.data,a=c.status;return Object(s.jsxs)("section",{className:"related",children:["loading"===a&&Object(s.jsx)(S,{}),"error"===a&&Object(s.jsx)(P,{message:"Failed to get doujins, check your internet connection"}),"success"===a&&n&&(n.doujins?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"title",children:"Related"}),Object(s.jsx)("div",{className:"view",children:n.doujins.map((function(e,t){return Object(s.jsxs)(j.b,{to:"/doujin/".concat(e.doujinId),className:"item",children:[Object(s.jsx)(R,Object(l.a)(Object(l.a)({className:"thumbnail"},e.thumbnail),{},{phImg:!1})),Object(s.jsxs)("div",{className:"summary",children:[Object(s.jsx)(d.e,{})," ",e.doujinId]})]},t)}))})]}):Object(s.jsx)(P,{message:"Not Found"}))]})},z=function(){var e=Object(o.h)().id,t=Object(b.a)(["doujin",e],N),c=t.data,n=t.status,a=function(e,t){var c=window.innerWidth-20;return{width:c,height:c*t/e,margin:"".concat(5,"px ").concat(10,"px")}};return Object(s.jsxs)("main",{className:"preview",children:["loading"===n&&Object(s.jsx)(S,{full:!0}),"error"===n&&Object(s.jsx)(P,{full:!0,message:"Not Found"}),"success"===n&&c&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:"details",children:[Object(s.jsxs)("div",{className:"cover",children:[Object(s.jsx)(R,Object(l.a)(Object(l.a)({className:"bg"},c.thumbnail),{},{phImg:!1})),Object(s.jsx)(R,Object(l.a)(Object(l.a)({className:"main"},c.thumbnail),{},{phImg:!1}))]}),Object(s.jsx)("div",{className:"content-control",children:Object(s.jsx)("div",{className:"id",children:c.doujinId})}),Object(s.jsx)("div",{className:"content-container",children:Object(s.jsxs)("div",{className:"content",children:[Object(s.jsxs)("div",{className:"titles",children:[c.titles.pretty," / ",c.titles.japanese||"none"," /"," ",c.titles.english]}),Object(s.jsxs)("div",{className:"date",children:[Object(s.jsx)(d.j,{}),new Date(c.uploadDate).toLocaleDateString()]}),Object(s.jsxs)("div",{className:"chapters",children:[Object(s.jsx)(d.i,{}),c.length]}),Object(s.jsxs)("div",{className:"favorites",children:[Object(s.jsx)(d.f,{}),c.favorites]}),Object(s.jsx)("div",{className:"tags",children:function(e){var t=A(e);return t.list.map((function(e,c){return Object(s.jsxs)("div",{className:"group",children:[Object(s.jsx)("div",{className:"group-title",children:T(e)}),Object(s.jsx)("div",{className:"tags-wrap",children:t[e].map((function(e,t){return Object(s.jsxs)(j.b,{to:"/tag/".concat(e.id,"/").concat(e.name),className:"tag",children:[e.name,Object(s.jsx)("span",{className:"count",children:L(e.count)})]},t)}))})]},c)}))}(c.tags)})]})})]}),Object(s.jsx)(V,{id:c.doujinId}),Object(s.jsx)("div",{className:"chapters-indicator",children:Object(s.jsx)(d.a,{})}),Object(s.jsx)("section",{className:"pages",children:c.pages.map((function(e,t){return Object(s.jsxs)("div",{className:"page",style:a(e.width,e.height),children:[Object(s.jsxs)("div",{className:"pg-no",children:[t+1," of ",c.length]}),Object(s.jsx)(R,Object(l.a)(Object(l.a)({className:"page-image"},{url:e.url,height:e.height,width:e.width,extension:e.extension}),{},{phImg:!1}))]},t)}))})]})]})},H=function(){var e=E("p"),t=Object(u.a)(e,1)[0],c=Object(o.h)(),n=c.id,a=c.name,r=Object(b.a)(["tagged",n,t],y),i=r.data,j=r.status;return Object(s.jsxs)("main",{className:"tagged",children:["loading"===j&&Object(s.jsx)(S,{full:!0}),"error"===j&&Object(s.jsx)(P,{full:!0,message:"Failed to get doujins, check your internet connection"}),"success"===j&&i&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("section",{className:"tag-control",children:Object(s.jsx)("div",{className:"selected-tag",children:a})}),Object(s.jsx)("section",{className:"view-holder",children:i.doujins?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q,Object(l.a)({},{items:i.doujins})),Object(s.jsx)(p,Object(l.a)({},{page:t,sort:null,keyword:null,total:i.numPages}))]}):Object(s.jsx)(P,{message:"Not Found"})})]})]})},K=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(j.a,{children:[Object(s.jsx)(B,{}),Object(s.jsxs)(o.c,{children:[Object(s.jsx)(o.a,{exact:!0,path:"/",component:W}),Object(s.jsx)(o.a,{exact:!0,path:"/search",component:M}),Object(s.jsx)(o.a,{exact:!0,path:"/tag/:id/:name",component:H}),Object(s.jsx)(o.a,{exact:!0,path:"/doujin/:id",component:z})]})]})})};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(K,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ea9eeed3.chunk.js.map